// assets/js/i18n.js

// === I18N Data (–ü–µ—Ä–µ–≤–æ–¥—ã –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ app.js) ===
export const I18N = {
    ru: {
        profile_title: "–ü—Ä–æ—Ñ–∏–ª—å URSA",
        search_ph: "–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, bundleId‚Ä¶",
        install: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å",
        ipa: "–°–∫–∞—á–∞—Ç—å IPA",
        hack_features: "–§—É–Ω–∫—Ü–∏–∏ –º–æ–¥–∞",
        not_found: "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ",
        empty: "–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π",
        load_error: "–û—à–∏–±–∫–∞ Firestore",
        vip_only: "üîí –¢–æ–ª—å–∫–æ –¥–ª—è VIP",
        login_btn: "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google",
        logout_btn: "–í—ã–π—Ç–∏",
        guest: "–ì–æ—Å—Ç—å",
        dash: "‚Äî",
        badge_free: "Free",
        badge_vip: "‚≠ê VIP",
        acc_status: "–°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞:",
        acc_free: "Free",
        acc_vip: "VIP",
        cert_section: "üîè –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç",
        cert_state: "–°–æ—Å—Ç–æ—è–Ω–∏–µ:",
        cert_state_ok: "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω",
        cert_state_none: "‚ùå –ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω",
        cert_upload_btn: "üì§ –î–æ–±–∞–≤–∏—Ç—å / –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç",
        upgrade_btn: "üöÄ –ü–æ–¥–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å",
        vip_title: "VIP –°—Ç–∞—Ç—É—Å URSA",
        vip_desc: "üåü –ü–æ–ª—É—á–∏—Ç–µ VIP —Å—Ç–∞—Ç—É—Å –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –º–æ–¥–∞–º, —Å–∫—Ä—ã—Ç—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏ IPA.",
        vip_benefit1: "‚≠ê –î–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º –º–æ–¥–∞–º",
        vip_benefit2: "‚ö° –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è",
        vip_benefit3: "üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Telegram",
        vip_price: "–¶–µ–Ω–∞: 4.99 USD / –º–µ—Å—è—Ü",
        vip_buy: "üí≥ –ö—É–ø–∏—Ç—å",
        signing_start: "üîÑ –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–¥–ø–∏—Å—å...",
        signing_ready: "‚úÖ –ì–æ—Ç–æ–≤–æ! –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞—á–Ω—ë—Ç—Å—è‚Ä¶",
        signing_need_cert: "‚ùå –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–≤–æ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ",
        signing_wait: "‚è≥ –û–∂–∏–¥–∞–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è...",
        signing_job_error: "–û—à–∏–±–∫–∞: –ó–∞–¥–∞–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ",
        signing_job_failed: "–û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∏:",
        signing_timeout: "–û—à–∏–±–∫–∞: –¢–∞–π–º–∞—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è (10 –º–∏–Ω)",
        modal_version: "–í–µ—Ä—Å–∏—è",
        modal_size: "–†–∞–∑–º–µ—Ä",
        modal_min_ios: "–ú–∏–Ω. iOS",
        time_ago: "–Ω–∞–∑–∞–¥",
        time_just_now: "—Ç–æ–ª—å–∫–æ —á—Ç–æ",
        time_minute: "–º–∏–Ω—É—Ç—É",
        time_minutes_1: "–º–∏–Ω—É—Ç—ã",
        time_minutes_2: "–º–∏–Ω—É—Ç",
        time_hour: "—á–∞—Å",
        time_hours_1: "—á–∞—Å–∞",
        time_hours_2: "—á–∞—Å–æ–≤",
        time_day: "–¥–µ–Ω—å",
        time_days_1: "–¥–Ω—è",
        time_days_2: "–¥–Ω–µ–π",
        time_week: "–Ω–µ–¥–µ–ª—é",
        time_weeks_1: "–Ω–µ–¥–µ–ª–∏",
        time_weeks_2: "–Ω–µ–¥–µ–ª—å",
        time_month: "–º–µ—Å—è—Ü",
        time_months_1: "–º–µ—Å—è—Ü–∞",
        time_months_2: "–º–µ—Å—è—Ü–µ–≤",
        time_year: "–≥–æ–¥",
        time_years_1: "–≥–æ–¥–∞",
        time_years_2: "–ª–µ—Ç"
    },
    en: {
        profile_title: "URSA Profile",
        search_ph: "Search by name or bundleId‚Ä¶",
        install: "Install",
        ipa: "Download IPA",
        hack_features: "Hack Features",
        not_found: "Nothing found",
        empty: "No apps yet",
        load_error: "Firestore error",
        vip_only: "üîí VIP Only",
        login_btn: "Sign in with Google",
        logout_btn: "Signout",
        guest: "Guest",
        dash: "‚Äî",
        badge_free: "Free",
        badge_vip: "‚≠ê VIP",
        acc_status: "Account Status:",
        acc_free: "Free",
        acc_vip: "VIP",
        cert_section: "üîè Certificate",
        cert_state: "Status:",
        cert_state_ok: "‚úÖ Uploaded",
        cert_state_none: "‚ùå Not uploaded",
        cert_upload_btn: "üì§ Add / Update Certificate",
        upgrade_btn: "üöÄ Upgrade Status",
        vip_title: "URSA VIP Status",
        vip_desc: "üåü Get VIP to unlock all mods, hidden features, and priority signing.",
        vip_benefit1: "‚≠ê Access to exclusive mods",
        vip_benefit2: "‚ö° Priority installation without wait",
        vip_benefit3: "üí¨ Direct Telegram support",
        vip_price: "Price: $4.99 / month",
        vip_buy: "üí≥ Buy",
        signing_start: "üîÑ Starting sign job...",
        signing_ready: "‚úÖ Done! Installation will start‚Ä¶",
        signing_need_cert: "‚ùå Upload your certificate in profile",
        signing_wait: "‚è≥ Waiting for completion...",
        signing_job_error: "Error: Job not found",
        signing_job_failed: "Signing error:",
        signing_timeout: "Error: Job timed out (10 min)",
        modal_version: "Version",
        modal_size: "Size",
        modal_min_ios: "Min. iOS",
        time_ago: "ago",
        time_just_now: "just now",
        time_minute: "minute",
        time_minutes_1: "minutes",
        time_minutes_2: "minutes",
        time_hour: "hour",
        time_hours_1: "hours",
        time_hours_2: "hours",
        time_day: "day",
        time_days_1: "days",
        time_days_2: "days",
        time_week: "week",
        time_weeks_1: "weeks",
        time_weeks_2: "weeks",
        time_month: "month",
        time_months_1: "months",
        time_months_2: "months",
        time_year: "year",
        time_years_1: "years",
        time_years_2: "years"
    }
};

let lang = (localStorage.getItem("ursa_lang") || (navigator.language || "ru").slice(0, 2)).toLowerCase();
if (!I18N[lang]) lang = "ru";

export const getLang = () => lang;
export const __t = (k) => (I18N[lang] && I18N[lang][k]) || k;

// === Dynamic i18n Apply ===
export function applyI18n() {
    const qsa = (sel, root = document) => Array.from(root.querySelectorAll(sel));

    qsa("[data-i18n]").forEach((el) => {
        const key = el.getAttribute("data-i18n");
        if (key && I18N[lang][key]) el.textContent = I18N[lang][key];
    });
    qsa("[data-i18n-placeholder]").forEach((el) => {
        const key = el.getAttribute("data-i18n-placeholder");
        if (key && I18N[lang][key]) el.placeholder = I18N[lang][key];
    });
}

// === Lang Toggle (–¥–ª—è tabbar) ===
export function toggleLang(iconUrl) {
    lang = lang === "ru" ? "en" : "ru";
    localStorage.setItem("ursa_lang", lang);
    document.getElementById("navLangIcon").src = iconUrl;
    applyI18n();
}

// –î–µ–ª–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –≥–ª–æ–±–∞–ª—å–Ω–æ, –∫–∞–∫ –±—ã–ª–æ –≤ —Å—Ç–∞—Ä–æ–º –∫–æ–¥–µ
window.__t = __t;
